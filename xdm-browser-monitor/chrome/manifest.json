{
  "update_url": "https://clients2.google.com/service/update2/crx",
  "manifest_version": 3,
  "minimum_chrome_version": "18.0",
  "name": "XDM Browser Monitor",
  "description": "XDM integration module for Firefox and Chromimum based browsers",
  "version": "2.0",
  "icons": {
    "48": "icon.png"
  },
  "background": {
    "service_worker": "bg.js",
    "declarative_net_request": {
      "rule_resources": [
        {
          "id": "xdm_download_rule",
          "enabled": true,
          "priority": 1,
          "action": {
            "type": "modifyHeaders",
            "responseHeaders": [
              {
                "header": "X-Download-Manager",
                "value": "XDM"
              }
            ]
          },
          "condition": {
            "urlFilter": ["*://*/*"]
          }
        }
      ]
    }
  },
  "action": {
    "default_icon": "icon.png",
    "default_popup": "fatal.html"
  },
  "permissions": [
    "tabs",
    "cookies",
    "contextMenus",
    "activeTab",
    "declarativeNetRequest",
    "webRequest",
    "webRequestBlocking"
  ],
  "host_permissions": ["*://*/*"],
  "commands": {
    "toggle-monitoring": {
      "suggested_key": {
        "default": "Ctrl+Shift+E",
        "mac": "Command+Shift+E"
      },
      "description": "Toggle monitoring"
    }
  }
}
